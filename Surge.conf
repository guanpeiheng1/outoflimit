[General]
# 延迟设置
internet-test-url = http://bing.com
proxy-test-url = http://www.google.com/generate_204
test-timeout = 3
#
# GeoIP 数据库
geoip-maxmind-url = https://cdn.jsdelivr.net/gh/Hackl0us/GeoIP2-CN@release/Country.mmdb
#
# 在 Wi-Fi 网络不佳时尝试使用数据网络建立连接
wifi-assist = false
#
# 允许 WiFi 访问
# iOS，若允许远程访问将 false 改为 true
allow-wifi-access = false
# wifi-access-http-port = 6152
# wifi-access-socks5-port = 6153
# macOS，若允许远程访问将 127.0.0.1 改为 0.0.0.0
# http-listen = 0.0.0.0
# socks5-listen = 0.0.0.0
#
# 远程控制器 (@ 前内容为密码)
http-api-tls = false
http-api-web-dashboard = false
# 允许 Surge 请求查看器或 Surge CI 进行管理控制
external-controller-access = admin@127.0.0.1:6170
# 允许另一个 App 或者设备通过 HTTP API 控制 Surge 功能
http-api = 123456@127.0.0.1:6166
#
# 兼容性设置
# 启动 Network.framework
network-framework = false
# IPv6 支持
ipv6 = false
# 兼容模式
compatibility-mode = 0
# 排除简单主机名
exclude-simple-hostnames = true
# 跳过代理
skip-proxy = localhost, *.local, 10.0.0.0/8, 100.64.0.0/10, 127.0.0.1/32, 169.254.0.0/16, 172.16.0.0/12, 192.168.0.0/16,192.168.122.1/32, 193.168.0.1/32, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32, *.crashlytics.com, passenger.t3go.cn, captive.apple.com, seed-sequoia.siri.apple.com, sequoia.apple.com, injections.adguard.org, local.adguard.org
#
# DNS 服务器
dns-server = system, 119.29.29.29, 119.28.28.28, 223.5.5.5, 223.6.6.6, 1.2.4.8, 8.8.8.8
# 从 /etc/hosts 读取 DNS 记录
read-etc-hosts = true
#
# 高级设置
# 日志等级 (warning, notify, info, verbose)
loglevel = notify
# 当遇到 REJECT 策略时返回错误页
show-error-page-for-reject = true
# 当 Surge VIF 处理 DNS 问题时，要求 Surge 返回真实 IP 地址
always-real-ip = *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com
# 让 Surge 把 TCP 连接当作 HTTP 请求来处理
force-http-engine-hosts = *.ott.cibntv.net
# UDP 转发
# udp-policy-not-supported-behaviour = reject


[Replica]
# 抓取流量的过滤
# 隐藏 Apple 请求
hide-apple-request = false
# 隐藏崩溃追踪器 Crashlytics 请求
hide-crashlytics-request = true
# 隐藏 UDP 会话
hide-udp = false
# 关键词过滤器
# none 关闭关键词过滤器
# whitelist 仅记录包含关键字的请求
# blacklist（仅记录不包含关键字的请求
# pattern 匹配通配符的请求
keyword-filter-type = none
keyword-filter = (null)


[Proxy Group]
Proxy = select, Auto, FallBack, RoundRobin, ManualSelect, DIRECT
ManualSelect = select, policy-path=https://sub.store/download/ROC-Taiwan?target=Surge, update-interval=0
Advertising = select, REJECT, DIRECT
BlockUpdate = select, REJECT, DIRECT
USA = select, include-other-group=ManualSelect, policy-regex-filter=美国|US|美國
FINAL = select, DIRECT, PROXY

Auto = url-test, include-other-group=ManualSelect, hidden=true
FallBack = fallback, include-other-group=ManualSelect, hidden=true
RoundRobin = load-balance, include-other-group=ManualSelect, hidden=true
PROXY = subnet, default = Proxy, "SSID:Tencent-WiFi" = DIRECT, hidden=true

[Rule]
# 远程规则集
# 去广告
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/Advertising/Advertising.list, Advertising
# 国外网站
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/Global/Global.list, PROXY
# 流媒体
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/GlobalMedia/GlobalMedia.list, PROXY
# Microsoft
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list,USA
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Bing/Bing.list,USA
#
# 本地规则集
DOMAIN,sydney.bing.com,USA
DOMAIN-KEYWORD,microsoft,USA
DOMAIN-KEYWORD,bing,USA
RULE-SET,SYSTEM,DIRECT
GEOIP,CN,DIRECT
# 以下规则集可用于替换 GEOIP,CN,DIRECT
# RULE-SET,https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/ruleset/ASN.China.list,DIRECT
FINAL,FINAL,dns-failed


[Host]
mtalk.google.com = 108.177.125.188
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29
update.googleapis.com = server:119.29.29.29
*.dl.playstation.net = server:119.29.29.29
*.taobao.com = server:223.5.5.5
*.tmall.com = server:223.5.5.5
*.alicdn.com = server:223.5.5.5
*.aliyun.com = server:223.5.5.5
*.tencent.com = server:119.29.29.29
*.qq.com = server:119.29.29.29
*.weixin.com = server:119.29.29.29
*.qpic.cn = server:119.29.29.29
*.jd.com = server:119.29.29.29
*.bilibili.com = server:119.29.29.29
hdslb.com = server:119.29.29.29
*.163.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29
*.mi.com = server:119.29.29.29
*.xiaomi.com = server:119.29.29.29


[URL Rewrite]


[Script]
# 京东多合一签到 = type=cron,cronexp=5 0 * * *,wake-system=1,timeout=60,script-path=https://raw.githubusercontent.com/NobyDa/Script/master/JD-DailyBonus/JD_DailyBonus.js
# 获取京东Cookie = type=http-request,requires-body=1,pattern=^https:\/\/(api\.m|me-api|ms\.jr)\.jd\.com\/(client\.action\?functionId=signBean|user_new\/info\/GetJDUserInfoUnion\?|gw\/generic\/hy\/h5\/m\/appSign\?),script-path=https://raw.githubusercontent.com/NobyDa/Script/master/JD-DailyBonus/JD_DailyBonus.js
# ResourceParser = type=http-request,pattern=http:\/\/resource\.parser,requires-body=1,max-size=-1,timeout=10,script-path=https://raw.githubusercontent.com/chouchoui/QuanX/master/Scripts/surge-tool/resource-parser.js


[MITM]
hostname = -*.amemv.com, ms.jr.jd.com, me-api.jd.com, api.m.jd.com
skip-server-cert-verify = true
